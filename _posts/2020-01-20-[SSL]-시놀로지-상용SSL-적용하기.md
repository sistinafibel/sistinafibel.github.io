---
layout: post
title: '[SSL] 시놀로지 상용SSL 적용하기 (부제: 잘못된 개인키 해결)'
date: 2019-12-05
author: cloudjun
tags: 하루 뻘글
---
시놀로지에서  인증서는 Free SSL Certificate가 너무 간편하게 등록이 가능하다보니 사실 상용 인증서를 사용 할 일이 별로 없긴 하지만, 3개월마다 갱신 시켜줄때 데스크톱에 적용시킨 동기화 프로그램을 다시 설정해줘야하는 문제 (중요했음..)  <br>
개인적으로 서비스를 운영할때는 년 단위 인증서를 등록하는 편이다보니 시놀로지에서도 등록하는 과정을 정리해봤다.

### 등록 위치
시놀로지 설정 > 보안 > 추가 > 새 인증서 추가 > 인증서 가져오기 

### 방법

인증서 파일 가져오기라는 창이 나오는 데 개인키 , 인증서 , 중간 인증서를 등록하게 한다.<br>
(중요) 이때 개인키의 경우 패스워드가 풀린 인증서로만 등록이 된다 

개인키 : 패스워드가 풀린 개인키 파일 (pem / key 상관 없음) <br>
인증서 : 실제 메일로 날라오는 SSL 인증서 파일 (www_test_link_cert.pem)<br>
채인 인증서 : Chain_RootCA_Bundle.crt  등 체인 Root 인증서 (적용할 필요가 없는 인증서도 있음.)<br>

----

### 인증서 등록시 잘못된 개인키라는 메세지가 뜰 시.

시놀로지에 상용 인증서를 적용시키니 "잘못된 개인키" 라는 메세지가 뜨며 제대로 인증서가 적용되지 않았다.
인증서와 개인키 CN(Common Name) 을 확인해도 동일해서 인증서나 개인키에 문제는 없었기에 삽질을 좀 하고 기록을 남긴다...

### 문제 해결

시놀로지에 적용하는 개인키는 암호화를 해제한 뒤 적용해야한다. <br>
다음과 같은 명령어로 암호를 제거한 개인키를 만들 수 있다.

```shell
openssl rsa -in 개인키.pem -out no_password_개인키.pem
```

이러고 다시 등록하면 해결!